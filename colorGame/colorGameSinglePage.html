<!DOCTYPE html>
<html>
<head>
    <title>the Amazing Color Guessing Game</title>
    <style>
        body{font-family:Lato,Arial;color:#fff;background-color:#333;font-size:18px;margin:0;padding:0}.display{font-size:170%;letter-spacing:.2rem}h1,h3{padding:0 15px;text-transform:uppercase;text-align:center;margin:0}#container{margin:10px auto;width:100%;max-width:600px}#navi{background-color:#fff;display:flex;flex-direction:column;align-items:stretch;margin:0;padding:0;text-align:center;letter-spacing:.1rem}#navicontainer{width:100%;max-width:600px;display:flex;flex-direction:row;justify-content:end;align-items:stretch;margin:0 auto;flex-wrap:wrap}#message,#navicontainer div,select{border:0;padding:0 10px;line-height:2.2rem;background-color:#fff;color:#45d;text-transform:uppercase;font-weight:bold;transition:all .3s ease}#reset:hover,select:hover,#message{background-color:#45d;color:#fff}#reset{margin-right:auto}.square{width:31%;float:left;padding-bottom:30%;border-radius:10%;margin:1%;background-color:#fff;transition:all .5s ease}
    </style>
</head>
<body>

<div id="header">
    <h3 class="display">Color Game</h3>
    <h1>Guess and Pick<br><span class="display" id="colorDisplay">the color</span></h1>
</div>

<div id="navi">
    <div id="message">Welcome! &nbsp; Loading game..</div>
    <div id="navicontainer">
        <div id="reset" onclick="initGame()">New Colors</div>
        <select id="Nsquares" onchange="handlerNcolors()">
            <option value="3">3 Squares</option>
            <option value="6" selected="true">6 Squares</option>
        </select>
        <select id="ColorSteps" onchange="handlerColorSteps()">
                <option value="1">256 Color Levels</option>
                <option value="4" selected="true">64 Color Levels</option>
                <option value="16">16 Color Levels</option>
                <option value="32">8 Color Levels</option>
                <option value="64">4 Color Levels</option>
                <option value="128">2 Color Levels</option>
        </select>
    </div>
</div>

<div id="container">
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
</div>

<script>
    function randomColor(steps){let level = 256/steps;return "rgb("+Math.floor(Math.random()*level)*steps+", "+Math.floor(Math.random()*level)*steps+", "+Math.floor(Math.random()*level)*steps+")"}function genColor(number){let result = [];for(let i = 0;i<number;i++){result.push(randomColor(colorsteps))}return result}const nsquares=6;let ncolors=6;let domNcolors = document.querySelector("#Nsquares");function handlerNcolors(){ncolors = domNcolors.options[domNcolors.selectedIndex].value;initGame()}let colorsteps=4;let domColorSteps = document.querySelector("#ColorSteps");function handlerColorSteps(){colorsteps = domColorSteps.options[domColorSteps.selectedIndex].value;initGame()}let domColorDisplay = document.querySelector("#colorDisplay");let domSquares = document.querySelectorAll(".square");let targetColorN = Math.floor(Math.random()*ncolors);let targetColorRGB = "";function initGame(){document.querySelector("#header").style.backgroundColor = "";document.querySelector("#message").innerHTML = "Click your guess!";targetColorN = Math.floor(Math.random()*ncolors);let colors = genColor(ncolors);for(let i = 0;i<nsquares;i++){if(i<ncolors){domSquares[i].removeEventListener("click",clickHide);domSquares[i].removeEventListener("click",clickWinner);domSquares[i].style.visibility = "visible";domSquares[i].style.backgroundColor = colors[i];if(i===targetColorN){targetColorRGB = colors[i];domColorDisplay.innerHTML = targetColorRGB;domSquares[i].addEventListener("click",clickWinner)}else{domSquares[i].addEventListener("click",clickHide)}}else{domSquares[i].style.backgroundColor = "transparent";domSquares[i].style.visibility = "hidden"}}}function clickHide(){this.style.backgroundColor = "transparent";document.querySelector("#message").innerHTML = "Try again!"}function clickWinner(){document.querySelector("#message").innerHTML = "That's Right!";document.querySelector("#header").style.backgroundColor = domColorDisplay.innerHTML;for(let i = 0;i<nsquares;i++){if(i<ncolors){domSquares[i].removeEventListener("click",clickHide);domSquares[i].removeEventListener("click",clickWinner);domSquares[i].style.backgroundColor = targetColorRGB}}}setTimeout(initGame,1500);
</script>
</body>
</html>
